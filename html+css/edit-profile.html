<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>КиноПортал - Редактирование профиля</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container-wrapper">
        <header class="header-sticky d-flex justify-content-center mb-5 mt-4">
            <nav class="custom-navbar d-flex align-items-center px-4 py-2 gap-2">
                <a href="index.html" class="nav-btn">Главная</a>
                <a href="movies.html" class="nav-btn">Фильмы</a>
                <a href="collections.html" class="nav-btn">Подборки</a>
                <a href="reviews.html" class="nav-btn">Рецензии</a>
                <a href="my-profile.html" class="nav-btn">Моя страница</a>
            </nav>
        </header>
        <main class="container-xl px-4 px-md-5 mt-5">
            <div style="max-width: 1100px; margin: 0 auto;">        
                <form action="/update-profile" method="POST">
                    <div class="row align-items-start g-0">
                        
                        <div class="col-auto d-flex flex-column align-items-center">
                            <label for="avatar-input" class="d-flex flex-column align-items-center" style="cursor: pointer;">
                                <div class="rounded-circle overflow-hidden mb-4 shadow avatar-container" 
                                     style="width: 220px; height: 220px; border: 3px solid white; position: relative;">
                                    
                                    <img id="avatar-preview" src="images/Ellipse 2.png" class="img-fluid" alt="Avatar" 
                                         style="width: 100%; height: 100%; object-fit: cover;">
                                    
                                    <div class="avatar-overlay d-flex align-items-center justify-content-center position-absolute top-0 start-0 w-100 h-100" 
                                         style="background: rgba(0,0,0,0.4); opacity: 0; transition: 0.3s;">
                                        <i class="fa-solid fa-camera text-white fs-1"></i>
                                    </div>
                                </div>
                                
                                <div class="custom-btn user-pill py-3 px-5 text-center" 
                                     style="font-size: 1.1rem; width: fit-content; min-width: 180px;">
                                    Изменить
                                </div>

                                <input type="file" id="avatar-input" accept="image/*" class="d-none">
                            </label>
                        </div>

                        <div class="col ps-md-5 pt-1">
                            
                            <div class="mb-4">
                                <label class="text-white-50 mb-2 d-block" style="font-size: 1.1rem;">
                                    Никнейм <i class="fa-solid fa-pen-nib ms-1" style="font-size: 0.8rem;"></i>
                                </label>
                                <div class="d-flex align-items-center mb-3">
                                    <input type="text" class="form-control bg-transparent text-white rounded-3 py-2 px-3 fs-4" 
                                           value="@real_pibble" 
                                           style="max-width: 400px; border-width: 2px !important; flex-shrink: 0;">
                                    <div class="ms-3 flex-grow-1"></div>
                                </div>
                            </div>

                            <div class="mb-5">
                                <label class="text-white-50 mb-2 d-block" style="font-size: 1.1rem;">
                                    О себе <i class="fa-solid fa-pen-nib ms-1" style="font-size: 0.8rem;"></i>
                                </label>
                                <textarea class="form-control bg-transparent text-white border-white rounded-3 py-2 px-3 fs-5" 
                                          rows="4" 
                                          style="max-width: 600px; border-width: 2px !important; resize: none;">Профессионально ищу скрытый смысл там, где режиссер просто забыл выключить свет</textarea>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-5 mb-5">
                        <button type="submit" class="custom-btn user-pill py-3 px-5" 
                                style="font-size: 1.2rem; min-width: 220px;">
                            Сохранить
                        </button>
                    </div>
                </form>
            </div>
        </main>
    </div>
    <script>
        document.getElementById('avatar-input').onchange = function (evt) {
            var tgt = evt.target || window.event.srcElement,
                files = tgt.files;
            if (FileReader && files && files.length) {
                var fr = new FileReader();
                fr.onload = function () {
                    document.getElementById('avatar-preview').src = fr.result;
                }
                fr.readAsDataURL(files[0]);
            }
        }
    </script>

    <script>
        document.getElementById('avatar-input').addEventListener('change', function(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('avatar-preview').src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });
    </script>
</body>
</html>